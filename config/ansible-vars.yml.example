# LumaDeploy AI Service Builder - Ansible Configuration
# Copy this file to ansible-vars.yml and customize for your environment

# K3s Cluster Configuration
k3s_version: "v1.29.4+k3s1"
k3s_token: "CHANGE-THIS-TO-A-SECURE-TOKEN"  # Generate a secure token
k3s_cluster_cidr: "10.42.0.0/16"
k3s_service_cidr: "10.43.0.0/16"

# Container Runtime
k3s_container_runtime: "containerd"
k3s_disable_components:
  - traefik  # We'll use our own ingress

# HAProxy Configuration
haproxy_frontend_port: 6443
haproxy_backend_port: 6443
haproxy_stats_port: 8080
haproxy_stats_user: "admin"
haproxy_stats_password: "CHANGE-THIS-PASSWORD"

# Ollama Configuration
ollama:
  enabled: true
  models:
    - "llama3.1:8b"
    - "codellama:7b"
    - "mistral:7b"
  gpu_enabled: false  # Set to true if you have GPU passthrough
  memory_limit: "8Gi"
  cpu_limit: "4"

# LibreChat Configuration
librechat:
  enabled: true
  admin_email: "admin@your-domain.com"
  app_title: "LumaDeploy AI Chat"
  custom_footer: "Powered by LumaDeploy"
  
# MCP Servers Configuration
mcp_servers:
  count: 5
  base_port: 3000
  memory_limit: "1Gi"
  cpu_limit: "500m"
  services:
    - name: "filesystem"
      description: "File system operations"
    - name: "web-search"
      description: "Web search capabilities"
    - name: "code-analysis"
      description: "Code analysis and review"
    - name: "data-processing"
      description: "Data processing and analysis"
    - name: "api-integration"
      description: "External API integration"

# Monitoring Configuration
monitoring:
  prometheus:
    enabled: true
    retention: "30d"
    storage_size: "10Gi"
  grafana:
    enabled: true
    admin_password: "CHANGE-THIS-PASSWORD"
    storage_size: "5Gi"
  loki:
    enabled: true
    retention: "7d"
    storage_size: "10Gi"

# Security Configuration
security:
  firewall_enabled: true
  ssh_port: 22
  allowed_ssh_users:
    - "ubuntu"
    - "your-username"
  fail2ban_enabled: true
  
# Backup Configuration
backup:
  enabled: true
  schedule: "0 2 * * *"  # Daily at 2 AM
  retention_days: 7
  storage_path: "/backup"

# Network Configuration
network:
  pod_subnet: "10.244.0.0/16"
  service_subnet: "10.96.0.0/12"
  dns_domain: "cluster.local"

# Storage Configuration
storage:
  default_storage_class: "local-path"
  persistent_volumes:
    ollama_models: "50Gi"
    librechat_data: "10Gi"
    prometheus_data: "20Gi"
    grafana_data: "5Gi"
